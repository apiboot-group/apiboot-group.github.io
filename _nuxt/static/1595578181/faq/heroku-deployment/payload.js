__NUXT_JSONP__("/faq/heroku-deployment", {data:[{},{path:"\u002Fzh\u002Ffaq\u002Fheroku-deployment",section:"faq",page:{attrs:{title:"部署至 Heroku",description:"如何将 Nuxt 应用部署至 Heroku?"},body:"\u003Ch1 id=\"如何将-nuxt-应用部署至-heroku-\"\u003E\u003Ca class=\"anchor\" aria-hidden=\"true\" href=\"#如何将-nuxt-应用部署至-heroku-\"\u003E\u003Csvg version=\"1.1\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" class=\"octicon octicon-link\" aria-hidden=\"true\"\u003E\u003Cpath fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\u002F\u003E\u003C\u002Fsvg\u003E\u003C\u002Fa\u003E如何将 Nuxt 应用部署至 Heroku？\u003C\u002Fh1\u003E\u003Cp\u003E推荐先去了解下 \u003Ca href=\"https:\u002F\u002Fdevcenter.heroku.com\u002Farticles\u002Fnodejs-support\"\u003E在 Heroku 里部署 node.js 应用的文档\u003C\u002Fa\u003E。\u003C\u002Fp\u003E\n\u003Cp\u003E首先，我们需要告诉 Heroku 安装项目的开发依赖包 \u003Ccode\u003EdevDependencies\u003C\u002Fcode\u003E (以便能在 Heroku 环境下运行 \u003Ccode\u003Enpm run build\u003C\u002Fcode\u003E)：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\"\u003Eheroku config:\u003Cspan class=\"hljs-built_in\"\u003Eset\u003C\u002Fspan\u003E NPM_CONFIG_PRODUCTION=\u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E同时，我们想让应用以 \u003Ccode\u003E生产模式\u003C\u002Fcode\u003E 运行，绑定的主机IP为 \u003Ccode\u003E0.0.0.0\u003C\u002Fcode\u003E：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\"\u003Eheroku config:\u003Cspan class=\"hljs-built_in\"\u003Eset\u003C\u002Fspan\u003E HOST=0.0.0.0\nheroku config:\u003Cspan class=\"hljs-built_in\"\u003Eset\u003C\u002Fspan\u003E NODE_ENV=production\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E配置完毕后可以在 Heroku 管理后台看到以下内容 (设置界面)：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FEEKl6aS.png\" alt=\"nuxt 在 Heroku 的配置变量\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E然后，通过在 \u003Ccode\u003Epackage.json\u003C\u002Fcode\u003E 里面添加 \u003Ccode\u003Eheroku-postbuild\u003C\u002Fcode\u003E 脚本让 Heroku 运行 \u003Ccode\u003Enpm run build\u003C\u002Fcode\u003E 命令：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs js\"\u003E\u003Cspan class=\"hljs-string\"\u003E&quot;scripts&quot;\u003C\u002Fspan\u003E: {\n  \u003Cspan class=\"hljs-string\"\u003E&quot;dev&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;nuxt&quot;\u003C\u002Fspan\u003E,\n  \u003Cspan class=\"hljs-string\"\u003E&quot;build&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;nuxt build&quot;\u003C\u002Fspan\u003E,\n  \u003Cspan class=\"hljs-string\"\u003E&quot;start&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;nuxt start&quot;\u003C\u002Fspan\u003E,\n  \u003Cspan class=\"hljs-string\"\u003E&quot;heroku-postbuild&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;npm run build&quot;\u003C\u002Fspan\u003E\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EHeroku使用 \u003Ca href=\"https:\u002F\u002Fdevcenter.heroku.com\u002Farticles\u002Fprocfile\"\u003EProcfile\u003C\u002Fa\u003E (命名文件\u003Ccode\u003EProcfile\u003C\u002Fcode\u003E，没有文件扩展名)，指定 apps dynos 执行的命令。 启动 Procfile 会非常简单，并且需要包含以下行：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs \"\u003Eweb: npm run start\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E这将指示运行\u003Ccode\u003Enpm run start\u003C\u002Fcode\u003E命令并告诉heroku将外部HTTP流量引导到它。\u003C\u002Fp\u003E\n\u003Cp\u003E最后，我们可以在Heroku上推送应用程序：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\"\u003Egit push heroku master\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E要将\u003Cstrong\u003E非主分支部署\u003C\u002Fstrong\u003E到Heroku，请使用：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\"\u003Egit push heroku develop:master\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E其中\u003Ccode\u003Edevelop\u003C\u002Fcode\u003E是你的分支的名称。\u003C\u002Fp\u003E\n\u003Cp\u003E您的Nuxt.js应用程序现在托管在Heroku上！\u003C\u002Fp\u003E\n"},contributors:[{author:"Atinux"},{author:"warriorBrian"}]}],fetch:[],mutations:[]});